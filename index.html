<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cintandina</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<style>
 body {
  margin: 10px;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  background-color: #FFFFFF;
  background-size: cover;
  background-repeat: no-repeat;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-x: hidden;
}

/* Contenedor principal */
 .contenedor-principal{
  display: flex;
  max-width: 650px;
  margin-bottom: 20px;
  justify-content: center;
}
 .contenedor-titulo{
  display: block;
  width: 300px;
  justify-content: flex-start;
  
 }
.titulo{
  font-size: 50px;
  height: auto;
  text-align: left;
  color: #348200;
  font-weight: 100;
}

 .instruccion{
  font-size: 20px;
  font-weight: bold;
  max-width: 200px;
  marging: 100px 0;
 }
 .instruccion, p{
 text-align: left;
 }

/* Logo */
.logo img { 
  width: 300px; 
  height: auto; 
  margin: 20px;
  object-fit: cover;
  transform: scaleX(-1); 
}

/* Marco de contenido */
.contenedor-marco {
  background-color: white;
  border: 2px solid #d1dceb;
  border-radius: 15px;
  padding: 30px; 
  width: 100%;
  max-width: 500px;
  text-align: left;
  margin: 20px auto;   
  overflow: hidden;
  align-items: center;
}

/* Marco superior */
.contenedor-marco2 {
  background-color: #FFFFFF;
  width: 100%;                 
  min-height: 60px;            
  display: flex;               
  align-items: center;         
  justify-content: center;     
  border-bottom: 2px solid #d1dceb;
  padding: 10px;               
  margin: 0;                   
  font-size: 18px;
  font-weight: bold;
  color: #647e87;
  line-height: 1.4;
}

/* Texto dentro de marcos */
.campo-dato { 
  margin-bottom: 12px; 
  font-size: 18px; 
  color: #647e87; 
  text-align: justify;
}

/* Botones */
a.boton {
  display: flex;                   
  align-items: center;            
  justify-content: center;        
  gap: 12px;                        
  width: 100%;  
  max-width: 500px; 
  min-height: 100px;
  background-color: #348200;
  color: white;
  border-radius: 70px;
  font-size: 20px;
  font-weight: bold;
  margin: 10px auto;
  transition: background-color 0.3s ease;
  text-decoration: none;           
  padding: 0 20px; 
  box-sizing: border-box;                
}

a.boton.disabled {
  pointer-events: none;
  opacity: 0.5;
}

a.boton img.icono-caja {
  width: 50px;  
  height: auto;
  flex-shrink: 0; 
}

a.boton:hover {
  background-color: #2c6d00;
}

/* Texto genérico */
.texto-justificado { 
  justify-content: flex-start;
  font-size: 22px;
  color: #647e87;
  line-height: 1.6;
  max-width: 500px;
  text-align: center;
}

.texto-justificado2 {
  justify-content: flex-start;
  font-size: 16px;
  color: #647e87;
  line-height: 1.6;
  max-width: 500px;
  text-align: center;
}

/* Loader Overlay - oculto por defecto */
.loader-overlay {
  display: none; 
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.8);
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
} 
 
.spinner {
  border: 6px solid #f3f3f3;
  border-top: 6px solid #348200;
  border-radius: 50%;
  width: 50px; height: 50px;
  animation: spin 1s linear infinite;
  margin-bottom: 10px;
}
@keyframes spin {
  100% { transform: rotate(360deg); }
}
.loader-overlay p {
  font-size: 18px;
  color: #348200;
  font-weight: bold;
}

/* Botón de cerrar loader */
.close-btn {
  position: absolute;
  top: 10px; 
  right: 10px;
  background: transparent;
  border: none;
  font-size: 24px;
  color: #333;
  cursor: pointer;
  z-index: 10000;
}

.close-btn:hover {
  transform: scale(1.2);
}

/* --- SOLO EN PANTALLAS PEQUEÑAS --- */
@media (max-width: 700px) {
  body {
    min-height: 95vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 0 10px;
  }
  .contenedor-principal {
    width: 100%;
    max-width: 100%;
    padding: 12px;
    margin: 2px;
  }
  .logo img { 
   width: 105px;
  }
  .contenedor-marco { 
   padding: 12px; 
   margin: 4px 20px; 
   max-width: calc(100% - 40px); 
  }
  .contenedor-marco2 {
    min-height: 0;         
    padding: 4px 8px;     
    font-size: 15px;      
    line-height: 1.2; 
  }
  .campo-dato { 
   font-size: 14px; 
   line-height: 1.4;
   text-align: start;
   margin: 1px 10px;
  }
  .texto-justificado { 
   font-size: 15px;
  }
  .texto-justificado2 { 
   font-size: 12px;
  }
  a.boton { 
   min-height: 80px; 
   font-size: 16px; 
   padding: 0 12px; 
   border-radius: 50px; 
  }
  a.boton img.icono-caja { 
   width: 47px; 
  }
}
</style>
</head>
<body>

<div class="contenedor-principal">
  <div class="logo">
      <img src="assets/PEGATIN-LANDING2.png" alt="caja">
  </div>
 <div class="contenedor-titulo">
  <div class= "titulo">¡Hola!</div>
  <div class="instruccion"><p>Al escanear el código QR impreso en la cinta podrás confirmar la entrega en tiempo real y enviarme tus sugerencias.</p></div>
 </div>
  </div>

<div class="texto-justificado">
     <b> Información de entrega:</b> 
  </div>
<div class="contenedor-marco">
  <div class="campo-dato">Para garantizar la entrega del pedido a conformidad, hacer clic en el botón "Confirmación de entrega".</div>
  <a class="boton disabled" id="btn-formulario" href="#" target="_blank">
    <img src="assets/CONFIRMACIÓN ICONO.svg" alt="icono-caja" class="icono-caja">
    <span>Confirmación de <br> entrega</span>
  </a>
</div>
  
<br>
<div class="contenedor-marco">
  <div class="campo-dato">En caso de alguna pregunta, sugerencia o si requiere comunicarse con nosotros, hacer clic en el botón "Inquietudes y sugerencias".</div>
  <a class="boton disabled" id="btn-whatsapp" href="#" target="_blank">
    <img src="assets/WHATSAPP ICONO.svg" alt="icono-caja" class="icono-caja">
    <span>Inquietudes <br> y sugerencias</span>
  </a>
</div>

<br><br>
<div class="texto-justificado2">Diseñado por <b>Cintandina S.A.</b></div>

<!-- Loader -->
<div id="loader" class="loader-overlay">
  <div class="spinner"></div>
  <p>Cargando...</p>
  <button id="cancel-loader" class="close-btn">✖</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

if (id) {
  const scriptURL = "https://script.google.com/macros/s/AKfycbzzXwBIArwt2FYthcQEpvRwIeeb-6iWeXczw6unUTlijG4l4fXl_FNkl2O1m1-oWbB3Gg/exec"; 

  fetch(`${scriptURL}?id=${id}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) { alert(data.error); return; }

      if (data.celular) {
        const celularStr = data.celular.toString().replace(/\D/g,'');
        const btnWhatsapp = document.getElementById("btn-whatsapp");
        btnWhatsapp.href = `https://wa.me/57${celularStr}?text=Hola, necesito ayuda con un pedido`;
        btnWhatsapp.classList.remove("disabled");
      }

      if (data.correo_electronico) {
        const btnFormulario = document.getElementById("btn-formulario");
        btnFormulario.href = `https://cjsanchez-cintandina.github.io/PruebaEntrega/?id=${id}&correo=${data.correo_electronico}`;
        btnFormulario.classList.remove("disabled");
      }

      // Evento de loader en ambos botones habilitados
      document.querySelectorAll("a.boton").forEach(btn => {
        if (!btn.classList.contains("disabled")) {
          btn.addEventListener("click", function(e) {
            e.preventDefault();
            const loader = document.getElementById("loader");
            loader.style.display = "flex";
            const link = btn.getAttribute("href");
            setTimeout(() => {
              window.location.href = link;
            }, 1000);
          });
        }
      });
    })
    .catch(err => console.error("Error cargando datos:", err));
}

// Botón ❌ para cancelar y recargar la página
 document.getElementById("cancel-loader").addEventListener("click", () => {
  document.getElementById("loader").style.display = "none";
 location.reload();
});
</script>
</body>
</html>















































